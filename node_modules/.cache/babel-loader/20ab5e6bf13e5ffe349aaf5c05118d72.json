{"ast":null,"code":"var _jsxFileName = \"/Users/yujiaguo/Documents/github/weather-widget/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\nimport WeatherWidget from './components/WeatherWidget/WeatherWidget'; // mock data for testing without API call\n\nimport testData from './testData.json';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OPEN_WEATHER_MAP_KEY = '524589f12ff60e2a150e470595208862';\nconst cities = [{\n  city: 'taipei',\n  label: 'ðŸ‡¹ðŸ‡¼ Taipei'\n}, {\n  city: 'tokyo',\n  label: 'ðŸ‡¯ðŸ‡µ Tokyo'\n}, {\n  city: 'moscow',\n  label: 'ðŸ‡·ðŸ‡º Moscow'\n}, {\n  city: 'sydney',\n  label: 'ðŸ‡¦ðŸ‡º Sydney'\n}, {\n  city: 'london',\n  label: 'ðŸ‡¬ðŸ‡§ London'\n}, {\n  city: 'paris',\n  label: 'ðŸ‡«ðŸ‡· Paris'\n}, {\n  city: 'mexico',\n  label: 'ðŸ‡²ðŸ‡½ Mexico'\n}, {\n  city: 'seattle',\n  label: 'ðŸ‡ºðŸ‡¸ Seattle'\n}, {\n  city: 'washington',\n  label: 'ðŸ‡ºðŸ‡¸ Washington'\n}, {\n  city: 'beijing',\n  label: 'ðŸ‡¨ðŸ‡³ Beijing'\n}];\n\nconst App = () => {\n  _s();\n\n  const params = new URLSearchParams(window.location.search);\n  const city = params.get('city_index');\n  const [cityIndex, setCityIndex] = useState(city || 0);\n  const [forecast, setForecast] = useState([]);\n  const [error, setError] = useState('');\n  let geocoder = new google.maps.Geocoder();\n\n  function codeLatLng(lat, lng) {\n    var latlng = new google.maps.LatLng(lat, lng);\n    geocoder.geocode({\n      'latLng': latlng,\n      Key: 'AIzaSyDoPpB22WsTfJsnZ_ACbg2iPr5zh6FOw8Q'\n    }, function (results, status) {\n      if (status == google.maps.GeocoderStatus.OK) {\n        console.log(results);\n\n        if (results[1]) {\n          //formatted address\n          alert(results[0].formatted_address); //find country name\n\n          for (var i = 0; i < results[0].address_components.length; i++) {\n            for (var b = 0; b < results[0].address_components[i].types.length; b++) {\n              //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate\n              if (results[0].address_components[i].types[b] == \"administrative_area_level_1\") {\n                //this is the object you are looking for\n                city = results[0].address_components[i];\n                break;\n              }\n            }\n          } //city data\n\n\n          alert(city.short_name + \" \" + city.long_name);\n        } else {\n          alert(\"No results found\");\n        }\n      } else {\n        alert(\"Geocoder failed due to: \" + status);\n      }\n    });\n  }\n\n  function success(position) {\n    const latitude = position.coords.latitude;\n    const longitude = position.coords.longitude;\n    codeLatLng(latitude, longitude);\n    console.log(position);\n    console.log('Your location is', latitude, longitude);\n  }\n\n  function geoError() {\n    console.log('Unable to retrieve your location');\n  }\n\n  if (!navigator.geolocation) {\n    console.log('Geolocation is not supported by your browser');\n  } else {\n    console.log('Locatingâ€¦');\n    navigator.geolocation.getCurrentPosition(success, geoError);\n  }\n\n  const fetchWeatherAsync = async cityId => {\n    try {\n      const response = await axios.get('https://api.openweathermap.org/data/2.5/forecast', {\n        params: {\n          q: cityId,\n          lang: 'zh_tw',\n          appid: OPEN_WEATHER_MAP_KEY,\n          units: 'metric'\n        }\n      });\n      const transformData = await response.data.list.map(data => ({\n        dt: data.dt,\n        temp: data.main.temp,\n        temp_min: data.main.temp_min,\n        temp_max: data.main.temp_max,\n        humidity: data.main.humidity,\n        icon: data.weather[0].icon,\n        desc: data.weather[0].description,\n        clouds: data.clouds.all,\n        wind: data.wind.speed\n      }));\n      setForecast(transformData);\n    } catch (err) {\n      if (OPEN_WEATHER_MAP_KEY.length === 0) {\n        // Use mock data if no key\n        const transformData = await testData.list.map(data => ({\n          dt: data.dt,\n          temp: data.main.temp,\n          temp_min: data.main.temp_min,\n          temp_max: data.main.temp_max,\n          humidity: data.main.humidity,\n          icon: data.weather[0].icon,\n          desc: data.weather[0].description,\n          clouds: data.clouds.all,\n          wind: data.wind.speed\n        }));\n        setForecast(transformData);\n        setError('');\n      } else {\n        setError(err.stack);\n      }\n    }\n  };\n\n  useEffect(() => {\n    fetchWeatherAsync(cities[cityIndex].city);\n  }, []); // notice the empty array here\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: error.length === 0 ? /*#__PURE__*/_jsxDEV(WeatherWidget, {\n      config: {\n        location: cities[cityIndex].label,\n        unit: 'metric',\n        locale: 'zh-tw',\n        onLocationClick: () => {\n          if (cityIndex + 1 >= cities.length) {\n            setCityIndex(0);\n            fetchWeatherAsync(cities[0].city);\n          } else {\n            setCityIndex(cityIndex + 1);\n            fetchWeatherAsync(cities[cityIndex + 1].city);\n          }\n        }\n      },\n      forecast: forecast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Unable to fetch weather data!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 140,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"W+Pt8OXigUhm20o7Nclo9bFBB7A=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/yujiaguo/Documents/github/weather-widget/src/App.js"],"names":["React","useState","useEffect","axios","WeatherWidget","testData","OPEN_WEATHER_MAP_KEY","cities","city","label","App","params","URLSearchParams","window","location","search","get","cityIndex","setCityIndex","forecast","setForecast","error","setError","geocoder","google","maps","Geocoder","codeLatLng","lat","lng","latlng","LatLng","geocode","Key","results","status","GeocoderStatus","OK","console","log","alert","formatted_address","i","address_components","length","b","types","short_name","long_name","success","position","latitude","coords","longitude","geoError","navigator","geolocation","getCurrentPosition","fetchWeatherAsync","cityId","response","q","lang","appid","units","transformData","data","list","map","dt","temp","main","temp_min","temp_max","humidity","icon","weather","desc","description","clouds","all","wind","speed","err","stack","unit","locale","onLocationClick"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AAEA,OAAOC,aAAP,MAA0B,0CAA1B,C,CACA;;AACA,OAAOC,QAAP,MAAqB,iBAArB;;AAEA,MAAMC,oBAAoB,GAAG,kCAA7B;AAEA,MAAMC,MAAM,GAAG,CACb;AAAEC,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CADa,EAEb;AAAED,EAAAA,IAAI,EAAE,OAAR;AAAiBC,EAAAA,KAAK,EAAE;AAAxB,CAFa,EAGb;AAAED,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CAHa,EAIb;AAAED,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CAJa,EAKb;AAAED,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CALa,EAMb;AAAED,EAAAA,IAAI,EAAE,OAAR;AAAiBC,EAAAA,KAAK,EAAE;AAAxB,CANa,EAOb;AAAED,EAAAA,IAAI,EAAE,QAAR;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CAPa,EAQb;AAAED,EAAAA,IAAI,EAAE,SAAR;AAAmBC,EAAAA,KAAK,EAAE;AAA1B,CARa,EASb;AAAED,EAAAA,IAAI,EAAE,YAAR;AAAsBC,EAAAA,KAAK,EAAE;AAA7B,CATa,EAUb;AAAED,EAAAA,IAAI,EAAE,SAAR;AAAmBC,EAAAA,KAAK,EAAE;AAA1B,CAVa,CAAf;;AAaA,MAAMC,GAAG,GAAG,MAAM;AAAA;;AAChB,QAAMC,MAAM,GAAG,IAAIC,eAAJ,CAAoBC,MAAM,CAACC,QAAP,CAAgBC,MAApC,CAAf;AACA,QAAMP,IAAI,GAAGG,MAAM,CAACK,GAAP,CAAW,YAAX,CAAb;AAEA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BjB,QAAQ,CAACO,IAAI,IAAI,CAAT,CAA1C;AACA,QAAM,CAACW,QAAD,EAAWC,WAAX,IAA0BnB,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACoB,KAAD,EAAQC,QAAR,IAAoBrB,QAAQ,CAAC,EAAD,CAAlC;AAEA,MAAIsB,QAAQ,GAAG,IAAIC,MAAM,CAACC,IAAP,CAAYC,QAAhB,EAAf;;AAEA,WAASC,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAE5B,QAAIC,MAAM,GAAG,IAAIN,MAAM,CAACC,IAAP,CAAYM,MAAhB,CAAuBH,GAAvB,EAA4BC,GAA5B,CAAb;AACAN,IAAAA,QAAQ,CAACS,OAAT,CAAiB;AAAC,gBAAUF,MAAX;AAAmBG,MAAAA,GAAG,EAAC;AAAvB,KAAjB,EAAoF,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC5G,UAAIA,MAAM,IAAIX,MAAM,CAACC,IAAP,CAAYW,cAAZ,CAA2BC,EAAzC,EAA6C;AAC7CC,QAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;;AACE,YAAIA,OAAO,CAAC,CAAD,CAAX,EAAgB;AACf;AACAM,UAAAA,KAAK,CAACN,OAAO,CAAC,CAAD,CAAP,CAAWO,iBAAZ,CAAL,CAFe,CAGhB;;AACK,eAAK,IAAIC,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACR,OAAO,CAAC,CAAD,CAAP,CAAWS,kBAAX,CAA8BC,MAA9C,EAAsDF,CAAC,EAAvD,EAA2D;AAC5D,iBAAK,IAAIG,CAAC,GAAC,CAAX,EAAaA,CAAC,GAACX,OAAO,CAAC,CAAD,CAAP,CAAWS,kBAAX,CAA8BD,CAA9B,EAAiCI,KAAjC,CAAuCF,MAAtD,EAA6DC,CAAC,EAA9D,EAAkE;AAElE;AACI,kBAAIX,OAAO,CAAC,CAAD,CAAP,CAAWS,kBAAX,CAA8BD,CAA9B,EAAiCI,KAAjC,CAAuCD,CAAvC,KAA6C,6BAAjD,EAAgF;AAC5E;AACArC,gBAAAA,IAAI,GAAE0B,OAAO,CAAC,CAAD,CAAP,CAAWS,kBAAX,CAA8BD,CAA9B,CAAN;AACA;AACH;AACJ;AACJ,WAde,CAehB;;;AACAF,UAAAA,KAAK,CAAChC,IAAI,CAACuC,UAAL,GAAkB,GAAlB,GAAwBvC,IAAI,CAACwC,SAA9B,CAAL;AAGC,SAnBD,MAmBO;AACLR,UAAAA,KAAK,CAAC,kBAAD,CAAL;AACD;AACF,OAxBD,MAwBO;AACLA,QAAAA,KAAK,CAAC,6BAA6BL,MAA9B,CAAL;AACD;AACF,KA5BD;AA6BD;;AAED,WAASc,OAAT,CAAiBC,QAAjB,EAA2B;AACzB,UAAMC,QAAQ,GAAID,QAAQ,CAACE,MAAT,CAAgBD,QAAlC;AACA,UAAME,SAAS,GAAGH,QAAQ,CAACE,MAAT,CAAgBC,SAAlC;AACA1B,IAAAA,UAAU,CAACwB,QAAD,EAAWE,SAAX,CAAV;AACAf,IAAAA,OAAO,CAACC,GAAR,CAAYW,QAAZ;AACAZ,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAA+BY,QAA/B,EAAyCE,SAAzC;AAED;;AAED,WAASC,QAAT,GAAoB;AAClBhB,IAAAA,OAAO,CAACC,GAAR,CAAY,kCAAZ;AACD;;AAED,MAAG,CAACgB,SAAS,CAACC,WAAd,EAA2B;AACzBlB,IAAAA,OAAO,CAACC,GAAR,CAAY,8CAAZ;AACD,GAFD,MAEO;AACLD,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACAgB,IAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCR,OAAzC,EAAkDK,QAAlD;AACD;;AAED,QAAMI,iBAAiB,GAAG,MAAOC,MAAP,IAAkB;AAC1C,QAAI;AACF,YAAMC,QAAQ,GAAG,MAAMzD,KAAK,CAACa,GAAN,CACrB,kDADqB,EAErB;AACEL,QAAAA,MAAM,EAAE;AACNkD,UAAAA,CAAC,EAAEF,MADG;AAENG,UAAAA,IAAI,EAAE,OAFA;AAGNC,UAAAA,KAAK,EAAEzD,oBAHD;AAIN0D,UAAAA,KAAK,EAAE;AAJD;AADV,OAFqB,CAAvB;AAWA,YAAMC,aAAa,GAAG,MAAML,QAAQ,CAACM,IAAT,CAAcC,IAAd,CAAmBC,GAAnB,CAAwBF,IAAD,KAAW;AAC5DG,QAAAA,EAAE,EAAEH,IAAI,CAACG,EADmD;AAE5DC,QAAAA,IAAI,EAAEJ,IAAI,CAACK,IAAL,CAAUD,IAF4C;AAG5DE,QAAAA,QAAQ,EAAEN,IAAI,CAACK,IAAL,CAAUC,QAHwC;AAI5DC,QAAAA,QAAQ,EAAEP,IAAI,CAACK,IAAL,CAAUE,QAJwC;AAK5DC,QAAAA,QAAQ,EAAER,IAAI,CAACK,IAAL,CAAUG,QALwC;AAM5DC,QAAAA,IAAI,EAAET,IAAI,CAACU,OAAL,CAAa,CAAb,EAAgBD,IANsC;AAO5DE,QAAAA,IAAI,EAAEX,IAAI,CAACU,OAAL,CAAa,CAAb,EAAgBE,WAPsC;AAQ5DC,QAAAA,MAAM,EAAEb,IAAI,CAACa,MAAL,CAAYC,GARwC;AAS5DC,QAAAA,IAAI,EAAEf,IAAI,CAACe,IAAL,CAAUC;AAT4C,OAAX,CAAvB,CAA5B;AAWA9D,MAAAA,WAAW,CAAC6C,aAAD,CAAX;AACD,KAxBD,CAwBE,OAAOkB,GAAP,EAAY;AACZ,UAAI7E,oBAAoB,CAACsC,MAArB,KAAgC,CAApC,EAAuC;AACrC;AACA,cAAMqB,aAAa,GAAG,MAAM5D,QAAQ,CAAC8D,IAAT,CAAcC,GAAd,CAAmBF,IAAD,KAAW;AACvDG,UAAAA,EAAE,EAAEH,IAAI,CAACG,EAD8C;AAEvDC,UAAAA,IAAI,EAAEJ,IAAI,CAACK,IAAL,CAAUD,IAFuC;AAGvDE,UAAAA,QAAQ,EAAEN,IAAI,CAACK,IAAL,CAAUC,QAHmC;AAIvDC,UAAAA,QAAQ,EAAEP,IAAI,CAACK,IAAL,CAAUE,QAJmC;AAKvDC,UAAAA,QAAQ,EAAER,IAAI,CAACK,IAAL,CAAUG,QALmC;AAMvDC,UAAAA,IAAI,EAAET,IAAI,CAACU,OAAL,CAAa,CAAb,EAAgBD,IANiC;AAOvDE,UAAAA,IAAI,EAAEX,IAAI,CAACU,OAAL,CAAa,CAAb,EAAgBE,WAPiC;AAQvDC,UAAAA,MAAM,EAAEb,IAAI,CAACa,MAAL,CAAYC,GARmC;AASvDC,UAAAA,IAAI,EAAEf,IAAI,CAACe,IAAL,CAAUC;AATuC,SAAX,CAAlB,CAA5B;AAWA9D,QAAAA,WAAW,CAAC6C,aAAD,CAAX;AACA3C,QAAAA,QAAQ,CAAC,EAAD,CAAR;AACD,OAfD,MAeO;AACLA,QAAAA,QAAQ,CAAC6D,GAAG,CAACC,KAAL,CAAR;AACD;AACF;AACF,GA7CD;;AA+CAlF,EAAAA,SAAS,CAAC,MAAM;AACdwD,IAAAA,iBAAiB,CAACnD,MAAM,CAACU,SAAD,CAAN,CAAkBT,IAAnB,CAAjB;AACD,GAFQ,EAEN,EAFM,CAAT,CA/GgB,CAiHR;;AAER,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA,cACGa,KAAK,CAACuB,MAAN,KAAiB,CAAjB,gBACC,QAAC,aAAD;AACE,MAAA,MAAM,EAAE;AACN9B,QAAAA,QAAQ,EAAEP,MAAM,CAACU,SAAD,CAAN,CAAkBR,KADtB;AAEN4E,QAAAA,IAAI,EAAE,QAFA;AAGNC,QAAAA,MAAM,EAAE,OAHF;AAINC,QAAAA,eAAe,EAAE,MAAM;AACrB,cAAItE,SAAS,GAAG,CAAZ,IAAiBV,MAAM,CAACqC,MAA5B,EAAoC;AAClC1B,YAAAA,YAAY,CAAC,CAAD,CAAZ;AACAwC,YAAAA,iBAAiB,CAACnD,MAAM,CAAC,CAAD,CAAN,CAAUC,IAAX,CAAjB;AACD,WAHD,MAGO;AACLU,YAAAA,YAAY,CAACD,SAAS,GAAG,CAAb,CAAZ;AACAyC,YAAAA,iBAAiB,CAACnD,MAAM,CAACU,SAAS,GAAG,CAAb,CAAN,CAAsBT,IAAvB,CAAjB;AACD;AACF;AAZK,OADV;AAeE,MAAA,QAAQ,EAAEW;AAfZ;AAAA;AAAA;AAAA;AAAA,YADD,gBAmBC;AAAA,8BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAA,kBAAME;AAAN;AAAA;AAAA;AAAA;AAAA,cAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AApBJ;AAAA;AAAA;AAAA;AAAA,UADF;AA4BD,CA/ID;;GAAMX,G;;KAAAA,G;AAiJN,eAAeA,GAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport './App.css';\n\nimport WeatherWidget from './components/WeatherWidget/WeatherWidget';\n// mock data for testing without API call\nimport testData from './testData.json';\n\nconst OPEN_WEATHER_MAP_KEY = '524589f12ff60e2a150e470595208862';\n\nconst cities = [\n  { city: 'taipei', label: 'ðŸ‡¹ðŸ‡¼ Taipei' },\n  { city: 'tokyo', label: 'ðŸ‡¯ðŸ‡µ Tokyo' },\n  { city: 'moscow', label: 'ðŸ‡·ðŸ‡º Moscow' },\n  { city: 'sydney', label: 'ðŸ‡¦ðŸ‡º Sydney' },\n  { city: 'london', label: 'ðŸ‡¬ðŸ‡§ London' },\n  { city: 'paris', label: 'ðŸ‡«ðŸ‡· Paris' },\n  { city: 'mexico', label: 'ðŸ‡²ðŸ‡½ Mexico' },\n  { city: 'seattle', label: 'ðŸ‡ºðŸ‡¸ Seattle' },\n  { city: 'washington', label: 'ðŸ‡ºðŸ‡¸ Washington' },\n  { city: 'beijing', label: 'ðŸ‡¨ðŸ‡³ Beijing' },\n];\n\nconst App = () => {\n  const params = new URLSearchParams(window.location.search);\n  const city = params.get('city_index');\n\n  const [cityIndex, setCityIndex] = useState(city || 0);\n  const [forecast, setForecast] = useState([]);\n  const [error, setError] = useState('');\n\n  let geocoder = new google.maps.Geocoder();\n\n  function codeLatLng(lat, lng) {\n\n    var latlng = new google.maps.LatLng(lat, lng);\n    geocoder.geocode({'latLng': latlng, Key:'AIzaSyDoPpB22WsTfJsnZ_ACbg2iPr5zh6FOw8Q'}, function(results, status) {\n      if (status == google.maps.GeocoderStatus.OK) {\n      console.log(results)\n        if (results[1]) {\n         //formatted address\n         alert(results[0].formatted_address)\n        //find country name\n             for (var i=0; i<results[0].address_components.length; i++) {\n            for (var b=0;b<results[0].address_components[i].types.length;b++) {\n\n            //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate\n                if (results[0].address_components[i].types[b] == \"administrative_area_level_1\") {\n                    //this is the object you are looking for\n                    city= results[0].address_components[i];\n                    break;\n                }\n            }\n        }\n        //city data\n        alert(city.short_name + \" \" + city.long_name)\n\n\n        } else {\n          alert(\"No results found\");\n        }\n      } else {\n        alert(\"Geocoder failed due to: \" + status);\n      }\n    });\n  }\n\n  function success(position) {\n    const latitude  = position.coords.latitude;\n    const longitude = position.coords.longitude;\n    codeLatLng(latitude, longitude)\n    console.log(position);\n    console.log('Your location is',latitude, longitude);\n\n  }\n\n  function geoError() {\n    console.log('Unable to retrieve your location');\n  }\n\n  if(!navigator.geolocation) {\n    console.log('Geolocation is not supported by your browser');\n  } else {\n    console.log('Locatingâ€¦');\n    navigator.geolocation.getCurrentPosition(success, geoError);\n  }\n\n  const fetchWeatherAsync = async (cityId) => {\n    try {\n      const response = await axios.get(\n        'https://api.openweathermap.org/data/2.5/forecast',\n        {\n          params: {\n            q: cityId,\n            lang: 'zh_tw',\n            appid: OPEN_WEATHER_MAP_KEY,\n            units: 'metric',\n          },\n        },\n      );\n      const transformData = await response.data.list.map((data) => ({\n        dt: data.dt,\n        temp: data.main.temp,\n        temp_min: data.main.temp_min,\n        temp_max: data.main.temp_max,\n        humidity: data.main.humidity,\n        icon: data.weather[0].icon,\n        desc: data.weather[0].description,\n        clouds: data.clouds.all,\n        wind: data.wind.speed,\n      }));\n      setForecast(transformData);\n    } catch (err) {\n      if (OPEN_WEATHER_MAP_KEY.length === 0) {\n        // Use mock data if no key\n        const transformData = await testData.list.map((data) => ({\n          dt: data.dt,\n          temp: data.main.temp,\n          temp_min: data.main.temp_min,\n          temp_max: data.main.temp_max,\n          humidity: data.main.humidity,\n          icon: data.weather[0].icon,\n          desc: data.weather[0].description,\n          clouds: data.clouds.all,\n          wind: data.wind.speed,\n        }));\n        setForecast(transformData);\n        setError('');\n      } else {\n        setError(err.stack);\n      }\n    }\n  };\n\n  useEffect(() => {\n    fetchWeatherAsync(cities[cityIndex].city);\n  }, []); // notice the empty array here\n\n  return (\n    <div className=\"App\">\n      {error.length === 0 ? (\n        <WeatherWidget\n          config={{\n            location: cities[cityIndex].label,\n            unit: 'metric',\n            locale: 'zh-tw',\n            onLocationClick: () => {\n              if (cityIndex + 1 >= cities.length) {\n                setCityIndex(0);\n                fetchWeatherAsync(cities[0].city);\n              } else {\n                setCityIndex(cityIndex + 1);\n                fetchWeatherAsync(cities[cityIndex + 1].city);\n              }\n            },\n          }}\n          forecast={forecast}\n        />\n      ) : (\n        <div>\n          <h2>Unable to fetch weather data!</h2>\n          <pre>{error}</pre>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}